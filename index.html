<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@700&display=swap" rel="stylesheet">
    <title>Metawin Vault</title>
    <style>
        /* Basic Setup */
        body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f0f0; }
        .ad-container {
            width: 300px; height: 250px; background-color: #000;
            overflow: hidden; position: relative; cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            border: 1px solid #30363d; box-sizing: border-box;
        }

        /* --- VAULT SCENE --- */
        #vault-container { position: absolute; width: 100%; height: 100%; z-index: 20; }
        .vault-segment {
            position: absolute;
            width: 150px; height: 125px;
            background-color: #1a1a2a;
            border: 1px solid #00aaff;
            box-shadow: inset 0 0 15px rgba(0, 170, 255, 0.3);
            transition: transform 1.5s cubic-bezier(0.86, 0, 0.07, 1);
        }
        .s1 { top: 0; left: 0; }
        .s2 { top: 0; right: 0; }
        .s3 { bottom: 0; left: 0; }
        .s4 { bottom: 0; right: 0; }
        #vault-logo {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 120px; z-index: 21; transition: all 0.5s;
        }
        #scan-laser {
            position: absolute; width: 100%; height: 3px;
            background: linear-gradient(to right, transparent, #00eaff, transparent);
            box-shadow: 0 0 10px #00eaff; top: -10px;
            z-index: 22;
        }
        #auth-text {
            position: absolute;
            top: 65%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            text-align: center;
            font-size: 14px; color: #00eaff; text-shadow: 0 0 5px #00eaff;
            z-index: 22; white-space: pre;
        }
        
        #vault-container.unlocked .s1 { transform: translate(-100%, -100%); }
        #vault-container.unlocked .s2 { transform: translate(100%, -100%); }
        #vault-container.unlocked .s3 { transform: translate(-100%, 100%); }
        #vault-container.unlocked .s4 { transform: translate(100%, 100%); }
        #vault-container.unlocked #vault-logo { opacity: 0; transform: translate(-50%, -50%) scale(2); }
        #vault-container.pushed-through { animation: pushThrough 1s forwards; }
        #auth-text.auth-text-disappear { animation: textDisappear 0.5s forwards; }

        /* --- PRIZE ROOM SCENE --- */
        #prize-room {
            position: absolute; width: 100%; height: 100%; z-index: 25;
            opacity: 0;
        }
        #prize-room::before {
            content: '';
            position: absolute;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.4);
            z-index: 26;
        }
        
        #nft-prize {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%; 
            object-fit: cover;
            z-index: 12;
        }
        
        #prize-headline {
            position: absolute; width: 100%; top: 20px; text-align: center;
            font-size: 28px; font-family: 'Teko', sans-serif; color: #FFD700;
            text-shadow: 0 0 10px #000, 0 0 20px #FFD700;
            opacity: 0; z-index: 30;
        }

        /* Gold Rain Effect */
        #gold-rain-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 27; pointer-events: none;
        }
        .gold-particle {
            position: absolute;
            top: -50px;
            width: 2px;
            height: 40px;
            background: linear-gradient(to bottom, rgba(255,215,0,0), gold);
            animation: goldRainFall 1s linear;
        }

        /* --- CTA BUTTON --- */
        #cta-button {
            position: absolute;
            bottom: -80px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #a47e3b, #ffeb8d); color: #000;
            font-size: 20px; font-family: 'Teko', sans-serif; font-weight: 700;
            padding: 8px 30px; border-radius: 8px;
            text-shadow: 0 1px 1px rgba(255,255,255,0.3);
            box-shadow: 0 0 15px #ffeb8d, inset 0 1px 1px rgba(255,255,255,0.5);
            z-index: 30; border: none; cursor: pointer;
        }

        /* --- Outro Animations --- */
        .is-closing #prize-room, .is-closing #cta-button {
            transition: opacity 0.5s;
            opacity: 0 !important;
        }

        /* --- KEYFRAMES --- */
        @keyframes scanDown { to { top: 100%; } }
        @keyframes pushThrough { to { transform: scale(3); opacity: 0; } }
        @keyframes reveal { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        @keyframes pressDown {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(0.95); }
        }
        @keyframes textDisappear { to { opacity: 0; transform: translate(-50%, -50%) scale(1.5); } }
        @keyframes revealCharacter {
            from { opacity: 0; filter: brightness(2); }
            to { opacity: 1; filter: brightness(1); }
        }
        @keyframes goldRainFall {
            to { transform: translateY(300px); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="ad-container" id="ad-container">
        
        <div id="vault-container">
            <div class="vault-segment s1"></div>
            <div class="vault-segment s2"></div>
            <div class="vault-segment s3"></div>
            <div class="vault-segment s4"></div>
            <img id="vault-logo" src="metawin.png" alt="Metawin Logo">
            <div id="scan-laser"></div>
            <div id="auth-text"></div>
        </div>
        
        <div id="prize-room">
            <div id="gold-rain-container"></div>
            <img id="nft-prize" src="nft.gif" alt="Metawin NFT Prize">
            <div id="prize-headline">YOUR PRIZES ARE WAITING.</div>
        </div>

        <button id="cta-button">ACCESS THE VAULT</button>
    </div>

    <script>
        const adContainer = document.getElementById('ad-container');
        const vaultContainer = document.getElementById('vault-container');
        const authText = document.getElementById('auth-text');
        const scanLaser = document.getElementById('scan-laser');
        const prizeRoom = document.getElementById('prize-room');
        const prizeHeadline = document.getElementById('prize-headline');
        const ctaButton = document.getElementById('cta-button');
        const nftPrize = document.getElementById('nft-prize');
        const goldRainContainer = document.getElementById('gold-rain-container');
        const link = "https://metawin.com/xummer/";
        
        const adDuration = 15000;
        let rainInterval;

        function typeWriter(element, lines, onComplete) {
            let lineIndex = 0; let charIndex = 0;
            element.innerHTML = '';
            function type() {
                if (lineIndex < lines.length) {
                    const currentLine = lines[lineIndex];
                    if (charIndex < currentLine.length) {
                        element.innerHTML += currentLine.charAt(charIndex); charIndex++;
                        setTimeout(type, 50);
                    } else {
                        element.innerHTML += '\n'; lineIndex++; charIndex = 0;
                        setTimeout(type, 500);
                    }
                } else if (onComplete) { onComplete(); }
            }
            type();
        }

        function startGoldRain() {
            if (rainInterval) clearInterval(rainInterval);
            rainInterval = setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'gold-particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.animationDuration = `${0.5 + Math.random() * 0.5}s`;
                particle.style.animationDelay = `${Math.random() * 0.5}s`;
                goldRainContainer.appendChild(particle);
                setTimeout(() => { particle.remove(); }, 1000);
            }, 100);
        }

        function stopGoldRain() {
            clearInterval(rainInterval);
            goldRainContainer.innerHTML = '';
        }

        function masterTimeline() {
            // --- RESET ---
            adContainer.className = 'ad-container';
            vaultContainer.className = 'vault-container';
            vaultContainer.style.animation = '';
            authText.classList.remove('auth-text-disappear');
            prizeRoom.style.animation = '';
            prizeRoom.style.opacity = 0;
            prizeHeadline.style.animation = '';
            nftPrize.style.animation = '';
            nftPrize.src = `nft.gif?_=${new Date().getTime()}`;
            
            ctaButton.style.transition = 'none';
            ctaButton.style.animation = '';
            ctaButton.style.bottom = '-80px';
            ctaButton.offsetHeight; 
            
            scanLaser.style.animation = '';
            authText.innerHTML = '';
            stopGoldRain();

            // --- START SEQUENCE ---
            setTimeout(() => {
                scanLaser.style.animation = 'scanDown 1.5s linear forwards';
                setTimeout(() => {
                    const authLines = ['> INITIATING PROTOCOL...', '> SCANNING FOR WINNER...', '> ACCESS GRANTED.'];
                    typeWriter(authText, authLines, () => {
                        authText.classList.add('auth-text-disappear');
                        setTimeout(() => {
                            vaultContainer.classList.add('unlocked');
                            setTimeout(() => {
                                vaultContainer.style.animation = 'pushThrough 1s forwards';
                                prizeRoom.style.opacity = 1;
                                startGoldRain();
                                nftPrize.style.animation = 'revealCharacter 2s forwards';
                                prizeHeadline.style.animation = 'reveal 1s 0.5s forwards';
                                
                                ctaButton.style.transition = 'bottom 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
                                ctaButton.style.animation = 'pressDown 3s infinite 1s';
                                ctaButton.style.bottom = '20px';
                            }, 1000);
                        }, 500);
                    });
                }, 500);
            }, 500);
            
            setTimeout(() => {
                adContainer.classList.add('is-closing');
            }, adDuration - 1000);
        }

        ctaButton.addEventListener('click', () => { window.open(link, '_blank'); });

        masterTimeline();
        setInterval(masterTimeline, adDuration);
    </script>
</body>
</html>